datasource sqlite {
    provider = "sqlite"
    url      = env("SQLITE_URL")
}

generator sqliteClient {
    provider = "prisma-client-js"
    output   = "../../node_modules/.prisma/sqlite-client"
}

model MovementType {
    id           Int           @id @default(autoincrement())
    name         String
    description  String
    range        Int
    code         String        @unique
    unitTypes    UnitType[]
    traversibles Traversible[]
}

model UnitType {
    id                         Int          @id @default(autoincrement())
    name                       String
    code                       String       @unique
    description                String
    primaryPower               Float
    secondaryPower             Float
    maxAmmo                    Int
    attackRange                Int
    primaryWeaponName          String
    primaryWeaponDescription   String
    secondaryWeaponDescription String
    movementType               MovementType @relation(fields: [movementTypeId], references: [id])
    movementTypeId             Int
}

model TerrainType {
    id           Int           @id @default(autoincrement())
    name         String
    description  String
    defense      Int
    code         String        @unique
    traversibles Traversible[]
}

model Traversible {
    movementType   MovementType @relation(fields: [movementTypeId], references: [id])
    terrainType    TerrainType  @relation(fields: [terrainTypeId], references: [id])
    movementTypeId Int
    terrainTypeId  Int
    traversible    Boolean
    penalty        Int

    @@unique([movementTypeId, terrainTypeId])
}

model PropertyType {
    id          Int    @id @default(autoincrement())
    name        String
    description String
    code        String @unique
}

model Map {
    id          Int      @id @unique @default(autoincrement())
    name        String   @unique
    description String
    data        String   @unique
    createdAt   DateTime @default(now())
}
